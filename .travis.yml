langage: python
python:
- '3.8'
addons:
  firefox: latest
before_script:
- wget https://github.com/mozilla/geckodriver/releases/download/v0.27.0/geckodriver-v0.27.0-linux64.tar.gz
- mkdir geckodriver
- tar -xzf geckodriver-v0.27.0-linux64.tar.gz -C geckodriver
- export PATH=$PATH:$PWD/geckodriver
- sudo apt-get install xvfb
- Xvfb :10 -ac &
- pip install -r requirements.txt
branches:
  only:
  - develop
env:
  global:
  - DJANGO_SETTINGS_MODULE="settings.travis"
  - DISPLAY=:10
  - secure: ya2oV9JhWpdM9lDuUjOnpJVfjfrDzngG36/28H5b9858qcfAfLktm9wxbQWXNpTMdYqbyuXZA/WxLUtYIbiih0Vtr18dq+4Qf9RSziXCMIfg2CqwVmqWm15ytHgTlJMSUZv1liN5R1chCXGERWN/D31CsgqJqDtS4h9d2wgYidt0n/J1HMp0dTQHuIvT73Hlo1MPUh/G9L2ehrBQST7k/VNQrGyIDz29DYf7rCDj7bVRw1QhlkXAljS692RY5FhGXc4bTze66ER0ktL6OJy4DdFdCbty3/dSh2BfhypdzlA+zWs+ZWEWryMYlcrdIVDV2OOzxUH9GNyuFwaziANC786XIhJ+pKdnUr7wvF0tB7YRQG71joEXPDO1J8kGjgKUCSR/D63/VwvnCb21HqfqO3BdoRZPZDE7kBuIRjUcjg9TmJBw6kynHXUtHCCVVk1+J5TmMVmHNw/8ViACeVZ7tQinUMAJSrVL3VIGpYuPZfJCV/2vLvqW+zv3iPs0GZkI11MmiJqiTYSRU/G/zvyGOxxCA3UKHBz/nX+v+aKJliklv/5Q/KJ7QhYkdT2tYOR+tKmsTIP/RYuql7+uHNZPfScsBRMKW9VbuO7h4Cv1bgTq4t2F4CjSGu1xt/fDL8keIu/ii/GxVTFTsAWz7uvBCq3/7Bkg708cfMdVI9Lj5KY=
services:
- postgresql
script:
- "./manage.py collectstatic --no-input"
- "./manage.py test tests"
